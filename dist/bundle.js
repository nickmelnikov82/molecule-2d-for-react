var commonjs2;(()=>{var e={373:(e,t,n)=>{(e.exports=n(252)()).push([e.id,".link line{stroke:dimgray}.link line.separator{stroke:#fff;stroke-width:2px}",""])},783:(e,t,n)=>{(e.exports=n(252)()).push([e.id,".node text{font:10px sans-serif;pointer-events:none}",""])},252:e=>{e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},246:e=>{var t={},n=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},r=n((function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())})),o=n((function(){return document.head||document.getElementsByTagName("head")[0]})),i=null,a=0,c=[];function s(e,n){for(var r=0;r<e.length;r++){var o=e[r],i=t[o.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](o.parts[a]);for(;a<o.parts.length;a++)i.parts.push(p(o.parts[a],n))}else{var c=[];for(a=0;a<o.parts.length;a++)c.push(p(o.parts[a],n));t[o.id]={id:o.id,refs:1,parts:c}}}}function u(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],i=o[0],a={css:o[1],media:o[2],sourceMap:o[3]};n[i]?n[i].parts.push(a):t.push(n[i]={id:i,parts:[a]})}return t}function l(e,t){var n=o(),r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function f(e){e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function d(e){var t=document.createElement("style");return t.type="text/css",l(e,t),t}function p(e,t){var n,r,o;if(t.singleton){var c=a++;n=i||(i=d(t)),r=v.bind(null,n,c,!1),o=v.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return t.rel="stylesheet",l(e,t),t}(t),r=b.bind(null,n),o=function(){f(n),n.href&&URL.revokeObjectURL(n.href)}):(n=d(t),r=m.bind(null,n),o=function(){f(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,n){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");void 0===(n=n||{}).singleton&&(n.singleton=r()),void 0===n.insertAt&&(n.insertAt="bottom");var o=u(e);return s(o,n),function(e){for(var r=[],i=0;i<o.length;i++){var a=o[i];(c=t[a.id]).refs--,r.push(c)}for(e&&s(u(e),n),i=0;i<r.length;i++){var c;if(0===(c=r[i]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete t[c.id]}}}};var y,h=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function v(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function m(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function b(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}},870:(e,t,n)=>{var r=n(373);"string"==typeof r&&(r=[[e.id,r,""]]),n(246)(r,{}),r.locals&&(e.exports=r.locals)},876:(e,t,n)=>{var r=n(783);"string"==typeof r&&(r=[[e.id,r,""]]),n(246)(r,{}),r.locals&&(e.exports=r.locals)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{default:()=>L});const e=react;var t=n.n(e);const o=prop-types;var i=n.n(o);const a=d3,c=function(e){if(!e||Number.isNaN(parseInt(e.bond,10)))throw new Error("Invalid input");if(e.bond<0)throw new Error("d.bond must be at least 0");return"".concat(4*e.bond-2,"px")},s=function(e,t){return e.category||e.color||t},u=function(e,t){return void 0===e?t:e};function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function y(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}n(876);var v="#39f8ff",m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(m,e);var n,r,o,i,c,l=(i=m,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(i);if(c){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function m(){return f(this,m),l.apply(this,arguments)}return n=m,r=[{key:"componentDidMount",value:function(){this.renderD3()}},{key:"componentDidUpdate",value:function(){this.renderD3()}},{key:"renderD3",value:function(){var e=this;if(this.nodesContainer){var t=(0,a.select)(this.nodesContainer),n=t.selectAll(".node").data(this.props.nodes,(function(e){return e.id})),r=n.enter().append("g");r.attr("class","node").on("click",this.props.onClickNode).attr("index",(function(e){return e.id})).call((0,a.drag)().on("start",this.props.onDragStartedNode).on("drag",m.onDragged).on("end",this.props.onDragEndedNode)),t.selectAll(".node").classed("selected",(function(t){return-1!==e.props.selectedAtomIds.indexOf(t.id)?v:""}));var o=(0,a.scaleSqrt)().range([0,6]);r.append("circle").attr("class","atom-circle").attr("r",(function(e){return o(u(e.size,1.5))})).style("fill",(function(e){return s(e,"white")})),(0,a.selectAll)(".atom-circle").style("stroke",(function(t){return-1!==e.props.selectedAtomIds.indexOf(t.id)?v:""})),r.append("text").attr("class","atom-label").attr("dy",".35em").attr("text-anchor","middle").text((function(e){return e.atom})),t.selectAll(".atom-label").attr("fill",(function(t){var n=-1!==e.props.selectedAtomIds.indexOf(t.id)?v:"";return u(t.textcolor,n)})),n.exit().remove()}}},{key:"render",value:function(){var e=this;return t().createElement("g",{className:"nodes-container",ref:function(t){e.nodesContainer=t}})}}],o=[{key:"onDragged",value:function(e){e.fx=a.event.x,e.fy=a.event.y}}],r&&d(n.prototype,r),o&&d(n,o),m}(t().Component);m.propTypes={selectedAtomIds:i().arrayOf(i().number),nodes:i().arrayOf(i().object),onClickNode:i().func,onDragStartedNode:i().func,onDragEndedNode:i().func};const b=m;function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function w(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}n(870);var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(l,e);var n,r,o,i,u=(o=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(o);if(i){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function l(){return k(this,l),u.apply(this,arguments)}return n=l,r=[{key:"componentDidMount",value:function(){this.renderD3()}},{key:"componentDidUpdate",value:function(){this.renderD3()}},{key:"renderD3",value:function(){if(this.linksContainer){var e=(0,a.select)(this.linksContainer),t=e.selectAll(".link").data(this.props.links,(function(e){return e.id})),n=t.enter().append("g").attr("class","link");n.append("line").attr("class","link-line"),e.selectAll(".link-line").attr("source",(function(e){return void 0!==e.source.id?e.source.id:e.source})).attr("target",(function(e){return void 0!==e.target.id?e.target.id:e.target})).style("stroke-width",c).style("stroke-dasharray",(function(e){return"dashed"===e.style?5:0})).style("stroke",(function(e){return s(e,"black")})).style("opacity",(function(e){if(0===e.bond)return 0})),n.append("text"),e.selectAll(".link").selectAll("text").attr("x",(function(e){return e.source.x||0})).attr("y",(function(e){return e.source.y||0})).attr("text-anchor","middle").text((function(){return" "})),n.filter((function(e){return e.bond>1})).append("line").attr("class","separator separator-double"),e.selectAll(".separator-double").style("stroke","#FFF").style("stroke-width",(function(e){return"".concat(4*e.bond-5,"px")})),n.filter((function(e){return 3===e.bond})).append("line").attr("class","separator separator-triple"),e.selectAll(".separator-triple").style("stroke",(function(e){return s(e,"black")})).style("stroke-width","1px"),t.exit().remove()}}},{key:"render",value:function(){var e=this;return t().createElement("g",{className:"links-container",ref:function(t){e.linksContainer=t}})}}],r&&x(n.prototype,r),l}(t().Component);S.propTypes={links:i().arrayOf(i().object)};const A=S;function D(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C={compareIds:function(e,t){if(!e.length&&t.length||e.length&&!t.length)return!1;var n=new Map;e.forEach((function(e){n.set(e,!1)}));var r,o=D(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(!n.has(i))return!1;n.set(i,!0)}}catch(e){o.e(e)}finally{o.f()}var a,c=D(n);try{for(c.s();!(a=c.n()).done;)if(!a.value[1])return!1}catch(e){c.e(e)}finally{c.f()}return!0},updateObjectInPlace:function(e,t){return Object.keys(t).forEach((function(n){e[n]instanceof Object&&t[n]instanceof Object?e[n]=C.updateObjectInPlace(e[n],t[n]):e[n]=t[n]})),e},updateModels:function(e,t){if(!C.compareIds(e.map((function(e){return e.id})),t.map((function(e){return e.id}))))return t;t.forEach((function(t){for(var n=!1,r=0;r<e.length;r+=1)if(e[r].id===t.id){e[r]=C.updateObjectInPlace(e[r],t),n=!0;break}n||e.push(t)}));for(var n=function(n){var o=e[n];t.find((function(e){return e.id===o.id}))||(e.splice(n,1),n-=1),r=n},r=0;r<e.length;r+=1)n(r);return e}};const R=C;function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function N(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(s,e);var n,r,o,i,c=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(o);if(i){var n=M(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return N(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),U(T(t=c.call(this,e)),"onClickNode",(function(e){var n=t.state.selectedAtomIds.slice(0),r=n.indexOf(e.id);-1!==r?n.splice(r,1):n.push(e.id),t.setState({selectedAtomIds:n}),t.props.onChangeSelection(n)})),U(T(t),"onDragStartedNode",(function(e){a.event.active||t.simulation.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y})),U(T(t),"onDragEndedNode",(function(e){a.event.active||t.simulation.alphaTarget(0),e.fx=null,e.fy=null})),U(T(t),"renderTransform",(function(){if(t.svg){var e=(0,a.select)(t.svg);e.selectAll(".node").attr("transform",(function(e){return"translate(".concat(e.x||0,",").concat(e.y||0,")")}));var n=e.selectAll(".link");n.selectAll("line").attr("x1",(function(e){return e.source.x||0})).attr("y1",(function(e){return e.source.y||0})).attr("x2",(function(e){return e.target.x||0})).attr("y2",(function(e){return e.target.y||0})),n.selectAll("text").attr("x",(function(e){return((e.source.x||0)+(e.target.x||0))/2})).attr("y",(function(e){return((e.source.y||0)+(e.target.y||0))/2}))}})),t.state={selectedAtomIds:e.selectedAtomIds||[]},t}return n=s,(r=[{key:"componentDidMount",value:function(){this.renderD3()}},{key:"componentWillReceiveProps",value:function(e){R.compareIds(this.state.selectedAtomIds,e.selectedAtomIds)||this.setState({selectedAtomIds:e.selectedAtomIds})}},{key:"componentDidUpdate",value:function(){this.renderD3()}},{key:"renderD3",value:function(){var e=this;this.simulation=(0,a.forceSimulation)().force("link",(0,a.forceLink)().distance((function(e){return u(e.distance,20)})).strength((function(e){return u(e.strength,1)}))).force("charge",(0,a.forceManyBody)()).force("center",(0,a.forceCenter)(this.props.width/2,this.props.height/2)),this.simulation.nodes(this.nodes).on("tick",(function(){return e.renderTransform()})),this.simulation.force("link").id((function(e){return e.id})).links(this.links)}},{key:"render",value:function(){var e=this;return this.props.modelData||(this.props.modelData={nodes:[],links:[]}),this.nodes=R.updateModels(this.nodes||[],this.props.modelData.nodes),this.links=R.updateModels(this.links||[],this.props.modelData.links),t().createElement("svg",{ref:function(t){e.svg=t},width:this.props.width,height:this.props.height},t().createElement(A,{links:this.links}),t().createElement(b,{selectedAtomIds:this.state.selectedAtomIds,nodes:this.nodes,onClickNode:this.onClickNode,onDragStartedNode:this.onDragStartedNode,onDragEndedNode:this.onDragEndedNode}))}}])&&P(n.prototype,r),s}(t().Component);B.defaultProps={width:500,height:500,selectedAtomIds:[],onChangeSelection:function(){},modelData:{nodes:[],links:[]}},B.propTypes={width:i().number,height:i().number,modelData:i().shape({nodes:i().array,links:i().array}).isRequired,selectedAtomIds:i().arrayOf(i().number),onChangeSelection:i().func};const L=B})(),commonjs2=r})();
//# sourceMappingURL=bundle.js.map